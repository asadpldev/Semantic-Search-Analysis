{% extends "layout/admin_base.html" %}
{% load static  %}
{% block title %}Dashboard{% endblock title %}
{% load crispy_forms_tags %}
{% block content %}

<div class="container float-left mt-5">
<h1></h1>
  <div class="row">
<div class="col">
  <canvas id="pieChart" style="width:100%;max-width:600px"></canvas>
</div>
<div class="col">
  <canvas id="barChart" style="width:100%;max-width:600px"></canvas>
</div>
</div>
</div>
<script>
// PIE CHART

var barColors = [
  "#b91d47",
  "#00aba9",
  "#2b5797",
  "#e8c3b9",
  "#1e7145"
];

// Make an AJAX request to fetch data from Django view
fetch('/home/get_sentiment_data')
  .then(response => response.json())
  .then(chartData => {
    new Chart("pieChart", {
      type: "pie",
      data: {
        labels: chartData.labels,
        datasets: [{
          backgroundColor: barColors,
          data: chartData.data
        }]
      },
      options: {
        title: {
          display: true,
          text: "Sentiment Analysis Chart"
        }
      }
    });
  })
  .catch(error => {
    console.error('Error fetching data:', error);
  });

// BAR CHART
fetch('/home/get_sentiment_data')
  .then(response => response.json())
  .then(chartData => {
    const xValues = chartData.labels;
    const yValues = chartData.data;
    const barColors = ['#b91d47', '#00aba9', '#2b5797', '#e8c3b9', '#1e7145']; // Add your colors here

    new Chart("barChart", {
      type: "bar",
      data: {
        labels: xValues,
        datasets: [{
          backgroundColor: barColors,
          data: yValues
        }]
      },
      options: {
        legend: { display: false },
        title: {
          display: true,
          text: "Sentiment Analysis Chart"
        }
      }
    });
  })
  .catch(error => {
    console.error('Error fetching data:', error);
  });

</script>

{% endblock content %}
